<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="site.title">Takahiro Matsunaga</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- 既存の style.css はそのまま使えます。下の <style> はナビ周りの最小追加CSSです。 -->
<link rel="stylesheet" href="style.css">
<!-- 
  <style>
    :root {
      --nav-h: 56px;
    }

    body { margin: 0; font-family: 'Noto Sans', system-ui, -apple-system, Segoe UI, Roboto, 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif; }

    header { position: relative; border-bottom: 1px solid #eee; }

    /* ====== NAV (desktop default) ====== */
    .site-nav { display: flex; align-items: center; justify-content: space-between; gap: 1rem; min-height: var(--nav-h); padding: 0 .75rem; }

    .brand { display: flex; align-items: center; gap: .5rem; font-weight: 700; text-decoration: none; color: inherit; }
    .brand img { width: 28px; height: 28px; border-radius: 6px; object-fit: cover; }

    .menu-toggle { display: none; appearance: none; border: none; background: none; padding: .5rem; border-radius: 8px; cursor: pointer; }
    .menu-toggle:focus-visible { outline: 2px solid #333; outline-offset: 2px; }

    .menu-panel { display: flex; align-items: center; gap: 1rem; }
    .menu { display: flex; gap: 1rem; list-style: none; margin: 0; padding: 0; }
    .menu a { text-decoration: none; color: inherit; padding: .375rem .5rem; border-radius: 8px; }
    .menu a:focus-visible, .menu a:hover { background: #f3f4f6; }

    .lang-switch { display: flex; gap: .5rem; font-weight: 700; align-items: center; }
    .lang-switch button { background: none; border: none; cursor: pointer; font: inherit; opacity: .6; padding: .25rem .375rem; border-radius: 6px; }
    .lang-switch button:focus-visible { outline: 2px solid #333; outline-offset: 2px; }

    /* ====== Mobile breakpoint ====== */
    @media (max-width: 860px) {
      .site-nav { position: relative; }
      .menu-toggle { display: inline-flex; align-items: center; justify-content: center; }

      /* 折りたたみパネル */
      .menu-panel { position: absolute; inset: var(--nav-h) .5rem auto .5rem; display: none; flex-direction: column; gap: .75rem; padding: .75rem; background: #fff; border: 1px solid #eee; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.08); z-index: 1000; }
      .site-nav[aria-expanded="true"] .menu-panel { display: flex; }

      .menu { flex-direction: column; }
      .menu a { padding: .5rem; }

      /* 言語切替はパネル内に表示 */
      .lang-switch { justify-content: flex-start; }
    }
  </style> -->
</head>
<body>
  <header>
    <nav class="site-nav" aria-label="Primary" aria-expanded="false">
      <a href="#home" class="brand">
        <img src="images/home_image.jpeg" alt="" aria-hidden="true" />
        <span data-i18n="hero.name">Takahiro Matsunaga</span>
      </a>

      <!-- ハンバーガー（860px以下で表示） -->
      <button class="menu-toggle" id="menuBtn" type="button" aria-controls="primary-nav" aria-expanded="false" aria-label="Toggle menu">
        <!-- シンプルなSVGアイコン（ハンバーガー／クローズをCSSではなくJSで切替） -->
        <svg id="iconBurger" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <svg id="iconClose" width="24" height="24" viewBox="0 0 24 24" fill="none" style="display:none" aria-hidden="true">
          <path d="M6 6l12 12M18 6l-12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
      </button>

      <div class="menu-panel" id="menuPanel">
        <ul class="menu" id="primary-nav">
          <li><a href="index.html" data-i18n="nav.home">Home</a></li>
          <li><a href="research.html" data-i18n="nav.research">Research</a></li>
          <li><a href="publications.html" data-i18n="nav.publications">Publications</a></li>
          <li><a href="awards_grants.html" data-i18n="nav.awards">Awards/Grants</a></li>
          <li><a href="activities.html" data-i18n="nav.activities">Activities</a></li>
        </ul>

        <div class="lang-switch" aria-label="Language switcher">
          <button type="button" data-lang="en">🇬🇧 En</button>
          <span>/</span>
          <button type="button" data-lang="ja">🇯🇵 Jp</button>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section id="home">
      <h1 data-i18n="hero.name">Takahiro Matsunaga</h1>
      <p data-i18n="hero.affiliation">Department of Civil Engineering, The University of Tokyo</p>
      <p><a href="http://bin.t.u-tokyo.ac.jp" target="_blank" data-i18n="hero.unit">Behavior in Networks (BinN) Studies Unit.</a></p>
      <p>
        <a href="mailto:matsunaga@bin.t.u-tokyo.ac.jp" target="_blank"><i class="fas fa-envelope"></i> <span data-i18n="hero.email">matsunaga[at]bin.t.u-tokyo.ac.jp</span></a><br>
        <a href="https://www.google.com/maps/place/7-3-1+Hongo,+Bunkyo-ku,+Tokyo+113-8656,+Japan" target="_blank"><i class="fas fa-map-marker-alt"></i> <span data-i18n="hero.address">7-3-1 Hongo, Bunkyo-ku, Tokyo 113-8656, Japan</span></a>
      </p>
      <p>
        <a href="tex/cv.pdf" target="_blank"><i class="fas fa-file-alt"></i> <span data-i18n="hero.cv">CV</span></a> |
        <a href="https://scholar.google.com/citations?user=fGWoyocAAAAJ&hl=ja" target="_blank"><i class="fas fa-graduation-cap"></i> <span data-i18n="hero.scholar">Google Scholar</span></a> |
        <a href="https://www.linkedin.com/in/takahiro-matsunaga-377864326/" target="_blank"><i class="fab fa-linkedin"></i> <span data-i18n="hero.linkedin">LinkedIn</span></a>
      </p>
      <p>
        <img src="images/home_image.jpeg" alt="Takahiro Matsunaga" class="profile-photo" data-i18n-attr='{"alt":"hero.imageAlt"}'>
      </p>
    </section>
  </main>

  <footer>
    <p data-i18n="site.footer">© 2025 Takahiro Matsunaga. All rights reserved.</p>
  </footer>

  <script>
    // ====== i18n 辞書（元コードを統合） ======
    const I18N = {
      en: {
        "site.title": "Takahiro Matsunaga",
        "nav.home": "Home",
        "nav.research": "Research",
        "nav.publications": "Publications",
        "nav.activities": "Activities",
        "nav.awards": "Awards/Grants",
        "hero.name": "Takahiro Matsunaga",
        "hero.affiliation": "Department of Civil Engineering, The University of Tokyo",
        "hero.unit": "Behavior in Networks (BinN) Studies Unit.",
        "hero.email": "matsunaga[at]bin.t.u-tokyo.ac.jp",
        "hero.address": "7-3-1 Hongo, Bunkyo-ku, Tokyo 113-8656, Japan",
        "hero.cv": "CV",
        "hero.scholar": "Google Scholar",
        "hero.linkedin": "LinkedIn",
        "hero.imageAlt": "Portrait of Takahiro Matsunaga",
        "site.footer": "© 2025 Takahiro Matsunaga. All rights reserved."
      },
      ja: {
        "site.title": "松永 隆宏",
        "nav.home": "表紙",
        "nav.research": "研究",
        "nav.publications": "論文",
        "nav.awards": "受賞・助成金",
        "nav.activities": "その他活動",
        "hero.name": "松永 隆宏",
        "hero.affiliation": "東京大学大学院 工学系研究科 社会基盤学専攻",
        "hero.unit": "交通・都市・国土学研究室（BinN）",
        "hero.email": "matsunaga[at]bin.t.u-tokyo.ac.jp",
        "hero.address": "〒113-8656 東京都文京区本郷7-3-1",
        "hero.cv": "CV（履歴書）",
        "hero.scholar": "Google Scholar",
        "hero.linkedin": "LinkedIn",
        "hero.imageAlt": "松永隆宏の写真",
        "site.footer": "© 2025 Takahiro Matsunaga. 禁無断転載"
      }
    };

    const $ = (q, r=document) => r.querySelector(q);
    const $$ = (q, r=document) => Array.from(r.querySelectorAll(q));

    function applyLang(lang) {
      const dict = I18N[lang] || I18N.en;

      $$('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[key] != null) el.textContent = dict[key];
      });
      $$('[data-i18n-attr]').forEach(el => {
        try {
          const map = JSON.parse(el.getAttribute('data-i18n-attr'));
          Object.entries(map).forEach(([attr, key]) => {
            if (dict[key] != null) el.setAttribute(attr, dict[key]);
          });
        } catch(e) {}
      });

      document.documentElement.setAttribute('lang', lang);
      const titleEl = document.querySelector('title[data-i18n]');
      if (titleEl) titleEl.textContent = dict[titleEl.getAttribute('data-i18n')];

      $$('.lang-switch button').forEach(btn => {
        const on = btn.dataset.lang === lang;
        btn.style.textDecoration = on ? 'underline' : 'none';
        btn.style.opacity = on ? '1' : '.6';
        btn.setAttribute('aria-pressed', on ? 'true' : 'false');
      });

      try { localStorage.setItem('site.lang', lang); } catch(e) {}
    }

    const saved = (() => { try { return localStorage.getItem('site.lang'); } catch(e) { return null; } })();
    const defaultLang = saved || ((navigator.language || 'en').toLowerCase().startsWith('ja') ? 'ja' : 'en');
    applyLang(defaultLang);

    $$('.lang-switch button').forEach(btn => {
      btn.addEventListener('click', () => applyLang(btn.dataset.lang));
    });

    // ====== モバイルメニュー制御 ======
    const nav = document.querySelector('.site-nav');
    const menuBtn = document.getElementById('menuBtn');
    const iconBurger = document.getElementById('iconBurger');
    const iconClose = document.getElementById('iconClose');
    const menuPanel = document.getElementById('menuPanel');

    function setExpanded(on) {
      nav.setAttribute('aria-expanded', on ? 'true' : 'false');
      menuBtn.setAttribute('aria-expanded', on ? 'true' : 'false');
      iconBurger.style.display = on ? 'none' : 'block';
      iconClose.style.display = on ? 'block' : 'none';
    }

    menuBtn.addEventListener('click', () => {
      const open = nav.getAttribute('aria-expanded') === 'true';
      setExpanded(!open);
    });

    // パネル内のリンクを選んだら自動クローズ
    $$('#primary-nav a').forEach(a => a.addEventListener('click', () => setExpanded(false)));

    // Esc で閉じる
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') setExpanded(false);
    });

    // 画面幅を広げたら（デスクトップに戻ったら）状態リセット
    const mql = window.matchMedia('(min-width: 861px)');
    mql.addEventListener('change', e => { if (e.matches) setExpanded(false); });
  </script>
</body>
</html>
